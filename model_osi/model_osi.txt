–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤ –≤ PostgreSQL –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ **–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (—à–ª—é–∑—ã, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã**.  

–Ø –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—É –ø—Ä–æ—Ü–µ—Å—Å **–ø–æ —É—Ä–æ–≤–Ω—è–º —Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏ OSI**, –Ω–∞—á–∏–Ω–∞—è –æ—Ç –¥–∞—Ç—á–∏–∫–∞ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è –∑–∞–ø–∏—Å—å—é –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É PostgreSQL.  

---

# **üì° –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤ –≤ PostgreSQL**
### **üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**
- **Zigbee** ‚Äì –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —Å–≤—è–∑–∏ –¥–∞—Ç—á–∏–∫–æ–≤.  
- **Wiren Board** ‚Äì –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (—à–ª—é–∑), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –¥–∞–ª—å—à–µ.  
- **MQTT** ‚Äì –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.  
- **PostgreSQL** ‚Äì –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ–∫–∞–∑–∞–Ω–∏—è.  
- **Apache Airflow** ‚Äì –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ –ë–î.  

---

# **üì∂ –ö–∞–∫ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —É—Ä–æ–≤–Ω–∏ –º–æ–¥–µ–ª–∏ OSI**
–ú–æ–¥–µ–ª—å OSI —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **7 —É—Ä–æ–≤–Ω–µ–π** ‚Äì –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é —á–∞—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö. –†–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–ª—É—á–∞–µ **Zigbee + Wiren Board + PostgreSQL**.  

---

## **1Ô∏è‚É£ –§–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å (Physical Layer)**
üëâ **–ü–µ—Ä–µ–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ —Ä–∞–¥–∏–æ–≤–æ–ª–Ω–∞–º.**  

- –î–∞—Ç—á–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏) –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Zigbee** (IEEE 802.15.4).  
- –û–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç **—Ä–∞–¥–∏–æ—Å–∏–≥–Ω–∞–ª** –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ 2.4 –ì–ì—Ü.  
- –†–∞–¥–∏–æ–≤–æ–ª–Ω—ã –Ω–µ—Å—É—Ç **–∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä **Wiren Board**.  

---

## **2Ô∏è‚É£ –ö–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (Data Link Layer)**
üëâ **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ Zigbee –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫.**  

- –î–∞—Ç—á–∏–∫–∏ —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ **–∫–∞–¥—Ä—ã Zigbee**.  
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Wiren Board –ø–æ–ª—É—á–∞–µ—Ç –∏—Ö –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É (CRC)** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫.  
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ—Ä—á–µ–Ω—ã ‚Äì –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞.  

---

## **3Ô∏è‚É£ –°–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å (Network Layer)**
üëâ **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ Zigbee-—Å–µ—Ç–∏.**  

- Zigbee –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—è—á–µ–∏—Å—Ç—É—é —Å–µ—Ç—å (mesh network)**.  
- –î–∞–Ω–Ω—ã–µ –æ—Ç –¥–∞–ª—å–Ω–∏—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –º–æ–≥—É—Ç **–ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (—Ä–æ—É—Ç–µ—Ä—ã Zigbee).  
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Wiren Board **–≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º —Å–µ—Ç–∏** –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.  

---

## **4Ô∏è‚É£ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (Transport Layer)**
üëâ **MQTT ‚Äì –Ω–∞–¥–µ–∂–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤.**  

- Wiren Board –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **MQTT (Message Queuing Telemetry Transport)**.  
- MQTT **–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö** (QoS 0, 1, 2).  
- Wiren Board –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **MQTT-—Å–æ–æ–±—â–µ–Ω–∏—è** –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–±—Ä–æ–∫–µ—Ä MQTT, –Ω–∞–ø—Ä–∏–º–µ—Ä, Mosquitto).  

---

## **5Ô∏è‚É£ –°–µ–∞–Ω—Å–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å (Session Layer)**
üëâ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.**  

- MQTT –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Å–µ—Å—Å–∏–∏ –º–µ–∂–¥—É Wiren Board –∏ –±—Ä–æ–∫–µ—Ä–æ–º**.  
- –ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è, Wiren Board –º–æ–∂–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è** –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö.  

---

## **6Ô∏è‚É£ –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å (Presentation Layer)**
üëâ **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–Ω—è—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.**  

- –î–∞—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ **—Å—ã—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `00110110` ‚Äì —ç—Ç–æ 54¬∞C).  
- Wiren Board **–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö** –≤ JSON:  
  ```json
  {
    "sensor_id": "temp_1",
    "value": 54,
    "unit": "C",
    "timestamp": "2024-03-31T10:15:00Z"
  }
  ```
- JSON —É–¥–æ–±–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ PostgreSQL.  

---

## **7Ô∏è‚É£ –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å (Application Layer)**
üëâ **–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Airflow.**  

- Wiren Board **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-–¥–∞–Ω–Ω—ã–µ** –Ω–∞ MQTT-–±—Ä–æ–∫–µ—Ä (Mosquitto).  
- **Airflow DAG** –∏–ª–∏ **Python-—Å–∫—Ä–∏–ø—Ç** –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ MQTT-—Ç–æ–ø–∏–∫, –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –≤ PostgreSQL:  
  ```python
  import psycopg2
  import paho.mqtt.client as mqtt
  import json

  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
  conn = psycopg2.connect("dbname=sensors user=admin password=secret")
  cursor = conn.cursor()

  # –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  def on_message(client, userdata, message):
      data = json.loads(message.payload.decode("utf-8"))
      cursor.execute("INSERT INTO sensor_data (sensor_id, value, unit, timestamp) VALUES (%s, %s, %s, %s)", 
                     (data["sensor_id"], data["value"], data["unit"], data["timestamp"]))
      conn.commit()

  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MQTT-–±—Ä–æ–∫–µ—Ä—É
  client = mqtt.Client()
  client.connect("mqtt_broker_address")
  client.subscribe("sensors/temperature")
  client.on_message = on_message

  client.loop_forever()
  ```
- PostgreSQL —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí –ø–æ—Ç–æ–º –∏—Ö –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é Python, BI –∏–ª–∏ Grafana.  

---

# **üîç –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö**
1. **–î–∞—Ç—á–∏–∫–∏ (Zigbee)** ‚Üí –ø–µ—Ä–µ–¥–∞—é—Ç **—Ä–∞–¥–∏–æ—Å–∏–≥–Ω–∞–ª—ã**.  
2. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã Zigbee** ‚Üí –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –¥–∞–ª—å—à–µ (–µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫ –¥–∞–ª–µ–∫–æ).  
3. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Wiren Board** ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ JSON.  
4. **MQTT-–±—Ä–æ–∫–µ—Ä (Mosquitto)** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Wiren Board.  
5. **Airflow DAG –∏–ª–∏ Python-—Å–∫—Ä–∏–ø—Ç** ‚Üí –∑–∞–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ PostgreSQL.  
6. **PostgreSQL** ‚Üí —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ, BI-–¥–∞—à–±–æ—Ä–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.  

---

# **üîπ –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∏ –∫–∞–∫ –∏—Ö —Ä–µ—à–∏—Ç—å?**
| **–ü—Ä–æ–±–ª–µ–º–∞** | **–†–µ—à–µ–Ω–∏–µ** |
|-------------|------------|
| –î–∞—Ç—á–∏–∫–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Zigbee-—Å–µ—Ç—å, —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —à–ª—é–∑ (Wiren Board) –∏—Ö –≤–∏–¥–∏—Ç. |
| –ü–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –≤ MQTT | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **QoS 1 –∏–ª–∏ 2** –≤ MQTT –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏. |
| –û—à–∏–±–∫–∏ –≤ PostgreSQL | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ë–î. |
| –ü—Ä–æ–ø—É—Å–∫–∏ –≤ –¥–∞–Ω–Ω—ã—Ö | –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏: –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–∏ ‚Üí –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ. |

---

# **üéØ –í—ã–≤–æ–¥**
- **Wiren Board + Zigbee** ‚Üí –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤.  
- **MQTT + Airflow + PostgreSQL** ‚Üí —Ö—Ä–∞–Ω—è—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ.  
- **BI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Grafana, Tableau)** ‚Üí —Å—Ç—Ä–æ—è—Ç –æ—Ç—á–µ—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã.  

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Å–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º, –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –∏–∑–Ω–æ—Å, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –∞–≤–∞—Ä–∏–∏**! üöÄ